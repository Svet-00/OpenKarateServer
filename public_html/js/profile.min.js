$((function(){"use strict";const a=$("#imageEditModal"),o=$("#changeAvatarView"),e=$("#deleteAvatar"),r=$("#newProfileImg"),s=$("#imageToEditSquare"),t=$("#imageToEditWide"),n=$(".modalDismiss"),l=$("#modalSave");Cropper.setDefaults({viewMode:2,movable:!1,rotatable:!1,scalable:!1,zoomable:!1});const d=new Cropper(s[0],{aspectRatio:1}),i=new Cropper(t[0],{aspectRatio:1.6});o.on("click",(o=>{a.modal("show")})),r.on("change",(o=>{var e=r.prop("files")[0];a.data("originalImageSrc",URL.createObjectURL(e)),a.modal("show")})),n.on("click",(a=>{r.val("")})),l.on("click",(async r=>{const s=new FormData;var t=a.data("originalImageSrc");t=await fetch(t).then((a=>a.blob())),s.append("originalImg",t),s.append("token",l.data("token")),d.getCroppedCanvas().toBlob((r=>{s.append("squareImg",r),i.getCroppedCanvas().toBlob((d=>{s.append("wideImg",d),console.log(s.values()),$.ajax(l.data("submitUrl"),{method:"post",data:s,processData:!1,contentType:!1,success:(s,n,l)=>{$(".avatar").attr("src",URL.createObjectURL(r)),a.data("originalImageSrc",URL.createObjectURL(t)),o.removeClass("disabled"),e.removeClass("disabled")},error:()=>{$("#avatarUploadErrorAlert").show()}}),n.trigger("click")}))}))})),a.on("shown.bs.modal",(o=>{const e=a.data("originalImageSrc");d.replace(e,!1),i.replace(e,!1)})),$('form[name="passwordForm"]').on("submit",(function(a){$("#passwordForm_plainPassword")[0].value!==$("#passwordForm_repeatPassword")[0].value&&(a.preventDefault(),$("#passwordsNotEqualError").show())})),$("#passwordForm_plainPassword").on("focus",(function(a){$("#passwordsNotEqualError").hide()})),$("#passwordForm_repeatPassword").on("focus",(function(a){$("#passwordsNotEqualError").hide()}))}));